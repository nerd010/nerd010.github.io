# 

# 嘿，SwiftUI

这两周在用 SwiftUI 写一个简单的应用，想着应该可以上架。鉴于 2018年时莫名其妙开发者账号被封，这次还是放平心态。查了一下，如果过不了身份认证这一步钱也不用交，想想也挺好。

在 SwiftUI 之前我没有在项目中写过声明式的UI 代码，RN 没有写过，接触过用它写的项目，不过自己当时对非原生的没什么兴趣，后来就让厦门的同事去搞了。Flutter 我距离它最近的一次是前公司同事让我帮他找个人用 Flutter 写 iOS。Weex？嗯......

## Learning by doing

我想好了要做什么就开始创建项目写代码了。在 2021 年写过一份 demo 的代码也已经完全不记得了。打开苹果官网，打开 SwiftUI Apprentice 这本书的电子版，浏览器可以正常上网。当然现在还有了个新工具-- ChatGPT。有了这些就可以开工了。遇到不会的就查，不知道自己不会的就问 ChatGPT，在一个自己相对陌生的领域它的作用还是比较大的。准备个空白文档，随时写下一些自己遇到的问题和查到的有用的解决方法。

### 三种布局方式

**HStack**， **VStack** 和 **ZStack**， 知道了这三种布局方式是不是感觉很简单，确实很简单有手就能写。视图之间要保持距离要怎么写? `.padding`。还有啥？还有 `Spacer()`。俩有啥区别？下面再回答。我想在视图之间加个分隔线要怎么写? `Divider()`。普通文本可以直接用 `Text()`，图片还是 `Image()`。常用的视图组件与 UIKit 中的应该都是一样的，只要之前写过 Swift 或者 ObjC 那就没有什么大问题。 想要配置什么属性直接使用 `.` 语法 XCode 就会给出提示，不给提示你又不知道的就先问一下 ChatGPT，Google 也是不错的选择。其实到这里，在不好好学习 SwiftUI 的情况下很多简单的 UI 就可以写了。 我们知道 ObjC 或者 Swift 的项目大多都是MVC 架构的，但是 SwiftUI 的自然架构是 **MVVM** 。为什么呢？这是个好问题，应该可以单开一篇来写。说回来，不管是 MVC 还是 MVVM，有了UI 还要有数据才行。

### 数据交互方式

这个问题在写之前我没觉得一定是个难点，在写的过程中发现没那么简单。现在只写下我目前了解的。
SwiftUI 采用属性包装器来实现数据与 UI 的交互。其中分为两大类：**值类型**和**引用类型**

- 值类型：我们常用的内置类型 Int， Bool 和 String 等，还有自定义类型 Structure 和 Enum。这些可以使用 `@State`， `@Binding `和  `@Environment`
- 引用类型：SwiftUI 中的引用类型就是 Class 了。`ObservableObject`,` @StateObject`, `@ObservedObject` and `@EnvironmentObject`. 

那这些分别代表什么意思，在什么情况下应该使用哪一个? 这也是个好问题，我们单开一篇。可以先提一个点： 当你需要共享的数据是可改变的状态时，类更适合。当你需要多个独立的状态时，结构更适合。

既然学习的时候要保持一个空杯心态，那我们就先不按使用 UIKit 时的传值方式思考。我们先理解 SwiftUI 的传值方式是怎么实现的。可以单开一篇。

### 数据的持久化

 - 使用数据库
 - 使用 plist
 - 使用 UserDefault

先写到这，学多一点再写。

---

提外话：看到 CSDN 和 51CTO 的文章还能看到文章的发布时间，还不错。为什么简书和知乎网页版本的文章已经看不到发布或更新的日期呢？
